#
# behat.yml file for testing with a Drupal site on Pantheon.
#
default:
  suites:
    default:
      paths:
        - %paths.base%/features
      contexts:
        - Drupal\DrupalExtension\Context\DrushContext
        - Drupal\DrupalExtension\Context\DrupalContext
        - Drupal\DrupalExtension\Context\MinkContext
        - PantheonSystems\CDNBehatHelpers\Contexts\FeatureContext
  extensions:


# Supplied by env variable.
#     base_url: http://dev-d8cdn.pantheonsite.io/
    Drupal\DrupalExtension:
      blackbox: ~
      api_driver: 'drush'
      drush:
# Supplied by env variable.
#     alias: '@pantheon.d8cdn.dev'

    DMore\ChromeExtension\Behat\ServiceContainer\ChromeExtension: ~


    Behat\MinkExtension:

      browser_name: chrome
      base_url: https://169-d8papc.pantheonsite.io/

      sessions:
        default:
          chrome:
 # I don't know why --remote-debugging-port didn't seem to work. I had to copy paste the port from the CLI output
            api_url: "http://127.0.0.1:9222"

#
#This worked!
# /Users/stevepersch/Sites/puppeteer/.local-chromium/mac-511134/chrome-mac/Chromium.app/Contents/MacOS/Chromium      --disable-gpu   --remote-debugging-port=9222        --disable-background-networking     --disable-background-timer-throttling     --disable-browser-side-navigation    --disable-client-side-phishing-detection   --disable-default-apps      --disable-extensions      --disable-hang-monitor    --disable-popup-blocking     --disable-prompt-on-repost    --disable-sync     --disable-translate    --metrics-recording-only     --no-first-run      --remote-debugging-port=0      --safebrowsing-disable-auto-update     --enable-automation      --password-store=basic      --use-mock-keychain